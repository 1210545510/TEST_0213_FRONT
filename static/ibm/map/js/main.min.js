function request(a) {
  var b = new RegExp("(^|&)" + a + "=([^&]*)(&|$)"),
    c = window.location.search.substr(1).match(b);
  return null != c ? unescape(c[2]) : null
}
$(function() {
  var originalIdList = ['50232', '50268', '50294', '50425']
  var getOriginalId = request("originalId")
  var setOriginalId = '50232'
  $.each(originalIdList, function(k, v){
    if (v == getOriginalId) {
      setOriginalId = getOriginalId
    }
  })
  $.getJSON("data/" + setOriginalId + ".json",
    function(a) {
      var g, h, i, j, k, l, m, b = echarts.init(document.getElementById("main")),
        c = ["#f0f", "#4be", "#fa2", "#7CFC00"],
        d = [],
        e = [],
        f = {};
      for (h = 0; h < a.length; h++) g = a[h],
        d.push({
          name: "b1",
          type: "lines",
          symbol: ["none", "arrow"],
          zlevel: 5,
          symbolSize: 6,
          effect: {
            show: !0,
            period: 5,
            trailLength: 0,
            symbolSize: 9
          },
          lineStyle: {
            normal: {
              color: c[g.type - 1],
              width: 1,
              opacity: 1,
              curveness: .1
            }
          },
          data: [{
            fromName: g.from.name,
            toName: g.to.name,
            value2: g.amount,
            coords: [g.from.coord, g.to.coord]
          }]
        }),
      f[g.from.name] || (f[g.from.name] = 1, e.push({
        type: "lines",
        zlevel: 5,
        lineStyle: {
          normal: {
            color: c[g.type - 1],
            width: 0,
            curveness: .1
          }
        },
        markPoint: {
          symbol: imgPath + g.from.type + ".png",
          symbolSize: 20,
          itemStyle: {
            normal: {
              borderColor: "#1e90ff",
              borderWidth: 1,
              label: {
                show: !1
              }
            },
            emphasis: {
              borderColor: "#1e90ff",
              borderWidth: 5,
              label: {
                show: !1
              }
            }
          },
          effect: {
            show: !0,
            shadowBlur: 0
          },
          data: [{
            name: g.from.name,
            type: g.from.type,
            coord: g.from.coord
          }]
        }
      })),
      f[g.to.name] || (f[g.to.name] = 1, e.push({
        type: "lines",
        zlevel: 5,
        lineStyle: {
          normal: {
            color: c[g.type - 1],
            width: 0,
            curveness: .1
          }
        },
        markPoint: {
          symbol: imgPath + g.to.type + ".png",
          symbolSize: 20,
          itemStyle: {
            normal: {
              borderColor: "#1e90ff",
              borderWidth: 1,
              label: {
                show: !1
              }
            },
            emphasis: {
              borderColor: "#1e90ff",
              borderWidth: 5,
              label: {
                show: !1
              }
            }
          },
          effect: {
            show: !0,
            shadowBlur: 0
          },
          data: [{
            name: g.to.name,
            type: g.to.type,
            coord: g.to.coord
          }]
        }
      }));
      i = {
        trigger: "item",
        formatter: function(a) {
          var c = "";
          return "markPoint" == a.componentType ? (c = "Name : " + a.name + "<br />", c += a.data.type ? "Category: " + a.data.type: "") : a.data.value2 && (c += "Amount:" + a.data.value2 + "<br />"),
            c
        }
      },
        j = e.concat(d),
        k = {},
        l = function() {
          $.get("data/world.json",
            function(a) {
              echarts.registerMap("world", a),
                k = {
                  title: {
                    text: "Alert Transaction History",
                    subtext: "",
                    left: "center"
                  },
                  tooltip: i,
                  series: mergeFlowData(j, {
                    id: "worldMap",
                    type: "map",
                    map: "world",
                    data: [{
                      name: "China",
                      value: 1
                    },
                      {
                        name: "Sudan",
                        value: 99
                      },
                      {
                        name: "United States",
                        value: 20
                      },
                      {
                        name: "India",
                        value: 60
                      }]
                  }),
                  geo: {
                    map: "world"
                  },
                  visualMap: {
                    left: "right",
                    min: 0,
                    max: 100,
                    color: ["orangered", "yellow", "green"],
                    text: ["High", "Low"],
                    calculable: !0
                  }
                },
                b.clear(),
                b.setOption(k, !0),
                b.on("click",
                  function(a) {
                    "United States" == a.name && m()
                  })
            })
        },
        m = function() {
          b.showLoading(),
            $.get("data/usa.json?",
              function(a) {
                b.hideLoading(),
                  echarts.registerMap("USA", a, {
                    Alaska: {
                      left: -131,
                      top: 25,
                      width: 15
                    },
                    Hawaii: {
                      left: -110,
                      top: 28,
                      width: 5
                    },
                    "Puerto Rico": {
                      left: -76,
                      top: 26,
                      width: 2
                    }
                  }),
                  k = {
                    tooltip: i,
                    geo: {
                      map: "USA"
                    },
                    toolbox: {
                      show: !0,
                      itemGap: 30,
                      left: "center",
                      top: "top",
                      feature: {
                        mark: {
                          show: !0
                        },
                        dataView: {
                          title: "DataView",
                          show: !0,
                          readOnly: !1
                        },
                        saveAsImage: {
                          title: "Save as image",
                          show: !0
                        },
                        myTool1: {
                          show: !0,
                          title: "Back",
                          icon: imgPath + "back.png",
                          onclick: function() {
                            l()
                          }
                        }
                      }
                    },
                    series: j
                  },
                  b.setOption(k, !0)
              })
        },
        l()
    })
});